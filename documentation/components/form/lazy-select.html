<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        form-lazy-select {
            display: block;
        }
    </style>
    <i18n>
        <translation>
            <en>
                This is a lazy select that receives the values from a callback. There are only 5 items at a time
                displayed. The model consists of one of the selected records when the record was selected. In contrast,
                the model of the native select consists of the value of the option element. In addition to the lazy Select there is
                the mat-input-container to turn the lazy Select into a Material Design Select.
            </en>
            <de>
                Dies ist ein lazy Select das die Werte aus einem Callback erhält. Es werden immer nur 5 Elemente zurzeit
                angezeigt. Das Model besteht aus einen der gewählten Records, wenn der Record ausgewählt wurde. Im Gegensatz
                besteht das Model des nativen Selects aus dem value des option Elementes. Zusätzlich zum lazy Select gibt
                es den mat-input-container, um aus dem lazy Select ein Material Design Select zu machen.
            </de>
        </translation>
        <translation>
            <en>
                With the attribute "multiselect" the select can be converted into a multi-select. In the overlay
                there is an icon in the top left to indicate the selected items. Is that select in
                Multi-select mode then the model consists of an array with the selected elements.
            </en>
            <de>
                Mit dem Attribute "multiselect" lässt sich das Select in ein Multi-Select umwandeln. In dem Overlay
                befindet sich oben links ein Symbol, um die ausgewählten Elemente anzuzeigen. Ist das Select im
                Multi-Select Modus dann besteht das Model aus einen Array mit den ausgewählten Elementen.
            </de>
        </translation>
        <translation>
            <en>Element</en>
            <de>Element</de>
        </translation>
        <translation>
            <en>Attribute</en>
            <de>Attribut</de>
        </translation>
        <translation>
            <en>Description</en>
            <de>Beschreibung</de>
        </translation>
        <translation>
            <en>The Placeholder text</en>
            <de>Der Placeholder Text</de>
        </translation>
        <translation>
            <en>The items data source</en>
            <de>Die Items Data Source</de>
        </translation>
        <translation>
            <en>True or false for multi selection</en>
            <de>True oder False für Multi-selektion</de>
        </translation>
        <translation>
            <en>The rest of the HTML file is not displayed</en>
            <de>Der rest der HTML Datei wird nicht angezeigt</de>
        </translation>

    </i18n>
</head>
<body>
<template>
    <div style="margin: auto; flex-wrap: wrap; display: flex; width: 100%">

         <div style="flex: 1; padding: 20px; min-width : 400px">

            <h2 style="margin-left: 0;">Lazy Select</h2>
            <hr class="line">

            <p i18n>
                This is a lazy select that receives the values from a callback. There are only 5 items at a time
                displayed. The model consists of one of the selected records when the record was selected. In contrast,
                the model of the native select consists of the value of the option element. In addition to the lazy Select there is
                the mat-input-container to turn the lazy Select into a Material Design Select.
            </p>

            <h3>DOM-API</h3>
            <table style="width: 100%; font-size: small">
                <thead>
                <tr>
                    <td><strong i18n>Element</strong></td>
                    <td><strong i18n>Attribute</strong></td>
                    <td><strong i18n>Description</strong></td>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>mat-input-container</td>
                    <td>placeholder</td>
                    <td i18n>The Placeholder text</td>
                </tr>
                <tr>
                    <td>dom-select</td>
                    <td>items</td>
                    <td i18n>The items data source</td>
                </tr>
                <tr>
                    <td>dom-select</td>
                    <td>model</td>
                    <td>Two way data binding</td>
                </tr>
                <tr>
                    <td>dom-select</td>
                    <td>multiselect</td>
                    <td i18n>True or false for multi selection</td>
                </tr>
                </tbody>
            </table>

            <div style="margin: 20px;">
                <mat-input-container placeholder="Materials">
                    <dom-lazy-select bind:items="materials" bind:model="selected" label="name" id="position">
                        <div let="material">{{material.position}} {{material.name}}</div>
                    </dom-lazy-select>
                </mat-input-container>
            </div>

            <h2 style="margin-left: 0;">Lazy Multi Select</h2>
            <hr class="line">

            <p i18n>
                With the attribute "multiselect" the select can be converted into a multi-select. In the overlay
                there is an icon in the top left to indicate the selected items. Is that select in
                Multi-select mode then the model consists of an array with the selected elements.
            </p>

            <h3>DOM-API</h3>

            <div style="margin: 20px;">
                <mat-input-container placeholder="Materials">
                    <dom-lazy-select bind:items="materials" multiselect="true" label="name" id="position">
                        <div let="material">{{material.position}} {{material.name}}</div>
                    </dom-lazy-select>
                </mat-input-container>
            </div>

        </div>

         <div style="flex: 1; padding: 20px; min-width : 400px">

            <h2>Source Code</h2>
            <hr class="line">
            <h3>HTML5</h3>
            <p i18n>The rest of the HTML file is not displayed</p>
            <div style="margin-top: 20px;">
                <div>
                    <code is="dom-code" lang="html5">
                        <template>
                            <iframe>
                                <mat-input-container placeholder="Materials">
                                    <dom-lazy-select bind:items="materials" bind:model="selected" label="name" id="position">
                                        <div let="material">{{material.position}} {{material.name}}</div>
                                    </dom-lazy-select>
                                </mat-input-container>

                                <mat-input-container placeholder="Materials">
                                    <dom-lazy-select bind:items="materials" multiselect="true" label="name" id="position">
                                        <div let="material">{{material.position}} {{material.name}}</div>
                                    </dom-lazy-select>
                                </mat-input-container>
                            </iframe>
                        </template>
                    </code>
                </div>
            </div>
            <h3>Javascript</h3>
            <div>
                <div>
                    <code is="dom-code" lang="javascript">
                        <template>
                            <script>
                                import {customViews} from "../../../library/simplicity-core/simplicity.js";
                                import {loader} from "../../../library/simplicity-core/processors/loader-processor.js";
                                import DomSelect from "../../../library/simplicity-core/components/form/dom-lazy-select.js";
                                import DomCode from "../../../library/simplicity-material/directives/dom-code.js";
                                import MatInputContainer from "../../../library/simplicity-material/components/form/container/mat-input-container.js";

                                class LazySelect extends HTMLElement {

                                    selected = {
                                        position: 1,
                                        name: "Hydrogen",
                                        weight: 1.0079,
                                        symbol: "H"
                                    }

                                    materials(query, callback) {
                                        fetch("materials.json")
                                            .then(response => response.json())
                                            .then((response) => {
                                                let filtered = response.rows.filter(item => item.name.toLowerCase().startsWith(query.value.toLowerCase()))
                                                let result = filtered.slice(query.index, query.index + query.limit);
                                                callback(result, response.rows.length)
                                            })
                                    }

                                    static get components() {
                                        return [DomSelect, MatInputContainer, DomCode]
                                    }

                                    static get template() {
                                        return loader("documentation/components/form/lazy-select.html")
                                    }

                                }

                                export default customViews.define({
                                    name: "form-lazy-select",
                                    class: LazySelect
                                })
                        </script>
                        </template>
                    </code>
                </div>
            </div>
        </div>
    </div>
</template>
</body>
</html>