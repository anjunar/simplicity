<!DOCTYPE html>
<html lang="en" xmlns:bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        function i18n() {
            return [{
                en : `In this example we are applying Input validation`,
                de : `In diesem Beispiel wenden wir Input Validation an`
            }, {
                en : `Element`,
                de : `Element`
            }, {
                en : `Attribute`,
                de : `Attribut`
            }, {
                en : `Description`,
                de : `Beschreibung`
            }, {
                en : `Only Letters`,
                de : `Nur Buchstaben`
            }, {
                en : `Value required`,
                de : `Wert wird ben√∂tigt`
            }, {
                en : `The rest of the HTML file is not displayed`,
                de : `Der rest der HTML Datei wird nicht angezeigt`
            }]
        }
    </script>
</head>
<body>
    <template>
        <div style="flex-wrap: wrap; display: flex">
                <div style="flex: 1; padding: 20px;">

                <h2 style="margin-left: 0;">Input Validation</h2>
                <hr class="line">

                <p i18n>
                    In this example we are applying Input validation
                </p>

                <h3>DOM-API</h3>
                <table style="width: 100%">
                    <thead>
                    <tr>
                        <td><strong i18n>Element</strong></td>
                        <td><strong i18n>Attribute</strong></td>
                        <td><strong i18n>Description</strong></td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>template</td>
                        <td>predicate</td>
                        <td>The predicate to eval</td>
                    </tr>
                    </tbody>
                </table>

                <div style="margin: 20px;">
                    <form>
                        <mat-input-container placeholder="Text">
                            <input type="text" is="dom-input" bind:variable="input" bind:model="text" required pattern="[a-zA-Z]+"/>
                            <div slot="error" >
                                <span name="valueMissing" i18n>Value required</span>
                                <span name="patternMismatch" i18n>Only Letters</span>
                                <span name="hello">Hello World!</span>
                            </div>
                        </mat-input-container>
                    </form>
                </div>


            </div>

            <div style="flex: 1; padding: 20px;">

                <h2>Source Code</h2>
                <hr class="line">
                <h3>HTML5</h3>
                <p i18n>The rest of the HTML file is not displayed</p>
                <div style="margin-top: 20px;">
                    <div>
                        <code is="dom-code" lang="html5">
                            <template>
                                <iframe>
                                    <mat-input-container placeholder="Text">
                                        <input type="text" is="dom-input" bind:variable="input" bind:model="text" required pattern="[a-zA-Z]+"/>
                                        <div slot="error" >
                                            <span name="valueMissing">Value required</span>
                                            <span name="patternMismatch">Only Letters</span>
                                            <span name="hello">Hello World!</span>
                                        </div>
                                    </mat-input-container>
                                </iframe>
                            </template>
                        </code>
                    </div>
                </div>
                <h3>Javascript</h3>
                <div>
                    <div>
                        <code is="dom-code" lang="javascript">
                            <template>
                                <script>
                                    import {customViews} from "../../../library/simplicity/simplicity.js";
                                    import DomInput from "../../../library/simplicity/directives/dom-input.js";
                                    import DomForm from "../../../library/simplicity/directives/dom-form.js";
                                    import MatInputContainer from "../../../library/simplicity/components/form/container/mat-input-container.js";
                                    import {loader} from "../../../library/simplicity/processors/loader-processor.js";

                                    class ValidationInput extends HTMLElement {

                                        input;
                                        text = ""

                                        initialize() {
                                            this.input.addValidator({
                                                validate : (element) => {
                                                    let executor = (resolve, reject) => {
                                                        if (element.value === "Hello World!") {
                                                            reject("hello");
                                                        } else {
                                                            resolve("hello");
                                                        }
                                                    };
                                                    return new Promise(executor);
                                                }
                                            })
                                        }

                                        static get components() {
                                            return [DomInput, DomForm, MatInputContainer]
                                        }

                                        static get template() {
                                            return loader("documentation/advanced/form/validation-input.html")
                                        }

                                    }

                                    export default customViews.define({
                                        name : "form-validation-input",
                                        class : ValidationInput
                                    })
                                </script>
                            </template>
                        </code>
                    </div>
                </div>
            </div>
        </div>
    </template>
</body>
</html>